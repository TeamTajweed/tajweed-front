<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet"> 
<link href='https://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet' type='text/css'>

<div class="h-screen w-full relative flex overflow-hidden">  
    <div class="w-full h-full ">
      <!--flex flex-col justify-between -->
      <!-- Header -->
      <header class="h-28 w-full flex items-center relative justify-end shadow-2xl">
        <app-navbarstudents></app-navbarstudents>
      </header>
  
      <!-- Main -->
      <main class="max-w-full h-full bg-[url('/assets/images/backgroundQuran.jpg')]">
              <!--max-w-full h-full flex relative overflow-y-hidden -->
        <!-- Container -->
        <div class="">
                        <!--h-full w-full m-4 flex flex-wrap items-start justify-start rounded-tl grid-flow-col auto-cols-max gap-4  -->

          <div class="max-w-full h-full rounded-lg flex-shrink-0 flex-grow ">
            <div class="container">
              <div class="massiveForm gap-8 columns-3">
                        <!-- Composant de sélection -->
                  <div class=" shadow-2xl flex flex-col grow">
                    <p class="paragraphe">Sélection</p>   
                    <div class="pb-10">
                      <label for="verseEnd" class="block mb-2 text-bg font-medium text-white">Choix de la sourate</label>
                      <div class="relative inline-flex">
                        <svg class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 412 232"><path d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z" fill="#FFF" fill-rule="nonzero"/></svg>
                        <select [(ngModel)]="selectedSourat" (ngModelChange)="onSurahSelect($event)" class="border border-gray-300 rounded-full text-gray-600 h-10 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none">
                          <option  *ngFor="let sourate of sourates" value="{{ sourate.id }}">{{sourate.id}} - {{sourate.name}}</option>
                        </select>
                      </div>
                    </div>            
                   <div class="pb-10">
                    <label for="verseEnd" class="block mb-2 text-bg font-medium text-white">Verset de départ</label>
                    <div class="relative inline-flex">
                      <svg class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 412 232"><path d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z" fill="#FFF" fill-rule="nonzero"/></svg>
                      <select id="verseStart" [disabled]="selectedSourat == undefined" [(ngModel)]="selectedVerseStart" (ngModelChange)="onVerseSelect($event)" class="border border-gray-300 rounded-full text-gray-600 h-10 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none">
                        <option  *ngFor="let verse of listVersesStart" value="{{ verse }}">Verset {{verse}}</option>
                      </select>
                    </div>
                   </div>
                   <div class="">
                    <label for="verseEnd" class="block mb-2 text-bg font-medium text-white">Verset de fin</label>
                    <div class="relative inline-flex">
                      <svg class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 412 232"><path d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z" fill="#FFF" fill-rule="nonzero"/></svg>
                      <select id="verseEnd" [disabled]="selectedVerseStart == undefined"  [(ngModel)]="selectedVerseEnd" class="border border-gray-300 rounded-full text-gray-600 h-10 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none">
                        <option  *ngFor="let verse of listVersesEnd" value="{{ verse }}">Verset {{verse}}</option>
                      </select>
                    </div>
                   </div>
                  </div>

                   <!-- Composant d'enregistrement -->
                  <div class="shadow-2xl grow">
                    <p class="paragraphe">Enregistrement</p>   
                    <div class="inline-flex rounded-md shadow-sm" role="group">
                      <button type="button" [disabled]="isRecording" (click)="startRecording()" class="group inline-flex items-center px-4 py-2 text-md font-medium text-blue-700 border border-gray-200 rounded-l-lg hover:bg-white hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 ">
                        <svg xmlns="http://www.w3.org/2000/svg" class="group-hover:fill-blue-700" height="1.25em" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#ffffff}</style><path d="M96 96V256c0 53 43 96 96 96s96-43 96-96H208c-8.8 0-16-7.2-16-16s7.2-16 16-16h80V192H208c-8.8 0-16-7.2-16-16s7.2-16 16-16h80V128H208c-8.8 0-16-7.2-16-16s7.2-16 16-16h80c0-53-43-96-96-96S96 43 96 96zM320 240v16c0 70.7-57.3 128-128 128s-128-57.3-128-128V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 89.1 66.2 162.7 152 174.4V464H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H216V430.4c85.8-11.7 152-85.3 152-174.4V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v24z"/></svg>
                        <span class="ml-1 group-hover:text-blue-700">Enregistrer</span> 
                      </button>
                      <button type="button" [disabled]="!isRecording" (click)="addRecordToRecords()" class="group inline-flex items-center px-4 py-2 text-md font-medium text-blue-700 border border-gray-200 hover:bg-white hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 ">
                        <svg xmlns="http://www.w3.org/2000/svg" class="group-hover:fill-blue-700" height="1.25em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#ffffff}</style><path d="M48 96V416c0 8.8 7.2 16 16 16H384c8.8 0 16-7.2 16-16V170.5c0-4.2-1.7-8.3-4.7-11.3l33.9-33.9c12 12 18.7 28.3 18.7 45.3V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96C0 60.7 28.7 32 64 32H309.5c17 0 33.3 6.7 45.3 18.7l74.5 74.5-33.9 33.9L320.8 84.7c-.3-.3-.5-.5-.8-.8V184c0 13.3-10.7 24-24 24H104c-13.3 0-24-10.7-24-24V80H64c-8.8 0-16 7.2-16 16zm80-16v80H272V80H128zm32 240a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"/></svg>
                        <span class="ml-1 group-hover:text-blue-700">Sauvegarder</span>
                      </button>
                      <button type="button" (click)="clearRecordedData()" class="group inline-flex items-center px-4 py-2 text-md font-medium text-blue-700 border border-gray-200 rounded-r-md  hover:bg-white hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 ">
                        <svg xmlns="http://www.w3.org/2000/svg" class="group-hover:fill-blue-700" height="1.25em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#ffffff}</style><path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/></svg>
                        <span class="ml-1 group-hover:text-blue-700">Supprimer</span>
                      </button>
                    </div>  
                    <div *ngIf="isRecording" class="content-center">
                      <div class="recordContainer">
                        <div class="recording-circle"></div>
                        <div class="recording-text">Enregistrement</div>
                      </div>
                      <p class="time">{{recordedTime}}</p>
                    </div>
                  </div>

                   <!-- Composant d'envoi -->
                  <div class="shadow-2xl grow">
                    <p class="paragraphe">Envoi</p>               
                    <div *ngIf="audioList.length != 0" class="flex flex-col items-center justify-center">
                      <div class="max-w-xl bg-green rounded-lg shadow-lg overflow-hidden">
                        <div class="relative">
                          <img src="../../assets/images/sourahBG.jpg" class="object-cover flex">
                          <div class="absolute p-4 inset-0 flex flex-col justify-end bg-gradient-to-b from-transparent to-gray-900 backdrop backdrop-blur-5 text-white">
                            <h3 class="font-bold">Sourate {{selectedSourateName}}</h3>
                            <span class="opacity-70">Versets de {{selectedVerseStart}} à {{selectedVerseEnd}}</span>
                          </div>
                        </div>
                        <ul class="text-xs sm:text-base divide-y border-t cursor-default">
                          <li *ngFor="let audio of audioList" class="flex items-center space-x-3 hover:bg-[#15817cef]">
                            <button (click)="playAudio(audio.url!)" class="p-3 group focus:outline-none">
                              <svg class="w-4 h-4 group-hover:text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                            </button>
                            <div class="flex-1">
                              Verset {{audio.numberVerse}}
                            </div>
                            <div class="text-xs text-gray-400">
                              {{audio.duration}}
                            </div>
                            <button class="focus:outline-none pr-4 group">
                              <svg class="w-4 h-4 group-hover:text-green-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 15v4c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-4M17 9l-5 5-5-5M12 12.8V2.5"/></svg>
                            </button>
                        </ul>
                      </div>
                    </div>
                  </div>
              </div>
              
              <div class="drops">
                <div class="drop drop-1"></div>
                <div class="drop drop-2"></div>
                <div class="drop drop-3"></div>
                <div class="drop drop-4 ">
                </div>
                <div class="drop drop-5"></div>
                <div class="drop drop-6"></div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  
  </div>